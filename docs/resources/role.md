---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "archestra_role Resource - archestra"
subcategory: ""
description: |-
  Manages an Archestra role with permissions.
---

# archestra_role (Resource)

Manages an Archestra role with permissions.

## Example Usage

```terraform
terraform {
  required_providers {
    archestra = {
      source = "archestra-ai/archestra"
    }
  }
}

provider "archestra" {
  # Configure via environment variables:
  # ARCHESTRA_BASE_URL - defaults to http://localhost:9000
  # ARCHESTRA_API_KEY  - required
  #   base_url = "http://localhost:8081"
}

# =============================================================================
# CREATE: Define a new role with specific permissions
# =============================================================================
resource "archestra_role" "developer" {
  name        = "Developer"
  description = "Can manage agents and view MCP servers"

  permissions = {
    # Read-only access to MCP servers
    mcpServer = ["read"]

    # Read access to teams
    team = ["read"]
  }
}

# =============================================================================
# READ: Reference role data using outputs or data source
# =============================================================================
output "developer_role_id" {
  description = "The ID of the developer role"
  value       = archestra_role.developer.id
}

output "developer_permissions" {
  description = "Permissions assigned to developer role"
  value       = archestra_role.developer.permissions
}

output "is_predefined" {
  description = "Whether this is a predefined (built-in) role"
  value       = archestra_role.developer.predefined
}

# Use the data source to read an existing role
data "archestra_role" "existing" {
  id = archestra_role.developer.id
}

output "existing_role_id" {
  description = "The ID of the existing role"
  value       = data.archestra_role.existing.id
}

output "existing_permissions" {
  description = "Permissions assigned to existing role"
  value       = data.archestra_role.existing.permissions
}

# =============================================================================
# UPDATE: Modify the role by changing attributes
# =============================================================================
# To update a role, modify the resource definition and run:
#   terraform plan   - to see what will change
#   terraform apply  - to apply the changes

resource "archestra_role" "updatable" {
  id          = archestra_role.developer.id
  name        = archestra_role.developer.name
  description = archestra_role.developer.description

  permissions = {
    team = ["update"]
  }
}

output "updatable_role_permissions" {
  description = "Permissions assigned to updatable role"
  value       = archestra_role.updatable.permissions
}

# =============================================================================
# IMPORT: Import an existing role into Terraform state
# =============================================================================
# To import an existing role by its ID:
#   terraform import archestra_role.developer <role-id>
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the role. Will be used to create the roleNonUUIDIdentifier.
- `permissions` (Map of List of String) Permissions for the role, as a map of resource types to allowed actions. Valid actions: admin, cancel, create, delete, read, update

### Optional

- `id` (String) Role identifier. If provided, manages an existing role instead of creating a new one.

### Read-Only

- `predefined` (Boolean) Whether this is a predefined (built-in) role
