---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "archestra_mcp_server Resource - archestra"
subcategory: ""
description: |-
  Manages an MCP server in the Private MCP Registry. This allows you to register local MCP servers that can then be installed by agents.
---

# archestra_mcp_server (Resource)

Manages an MCP server in the Private MCP Registry. This allows you to register local MCP servers that can then be installed by agents.

## Example Usage

```terraform
# Local MCP server with stdio transport (default)
resource "archestra_mcp_server" "filesystem" {
  name        = "filesystem-mcp-server"
  description = "MCP server for filesystem operations"
  docs_url    = "https://github.com/modelcontextprotocol/servers/tree/main/src/filesystem"

  local_config {
    command   = "npx"
    arguments = ["-y", "@modelcontextprotocol/server-filesystem", "/home/user"]

    environment = {
      NODE_ENV = "production"
    }
  }
}

# Local MCP server with custom auth fields
resource "archestra_mcp_server" "github" {
  name                 = "github-mcp-server"
  description          = "MCP server for GitHub API operations"
  docs_url             = "https://github.com/modelcontextprotocol/servers/tree/main/src/github"
  auth_description     = "Requires a GitHub personal access token"
  installation_command = "npm install -g @modelcontextprotocol/server-github"

  local_config {
    command   = "npx"
    arguments = ["-y", "@modelcontextprotocol/server-github"]

    environment = {
      NODE_ENV = "production"
    }
  }

  auth_fields = [
    {
      name        = "GITHUB_TOKEN"
      label       = "GitHub Personal Access Token"
      type        = "password"
      required    = true
      description = "Personal access token with repo and user scopes"
    }
  ]
}

# Local MCP server with SSE transport
resource "archestra_mcp_server" "web_search" {
  name        = "web-search-mcp-server"
  description = "MCP server for web search using Brave Search API"
  docs_url    = "https://github.com/modelcontextprotocol/servers/tree/main/src/brave-search"

  local_config {
    command        = "node"
    arguments      = ["dist/index.js"]
    transport_type = "sse"
    http_port      = 3000
    http_path      = "/sse"
  }

  auth_fields = [
    {
      name        = "BRAVE_API_KEY"
      label       = "Brave Search API Key"
      type        = "password"
      required    = true
      description = "API key from Brave Search API"
    }
  ]
}

# Local MCP server with Docker
resource "archestra_mcp_server" "postgres" {
  name        = "postgres-mcp-server"
  description = "MCP server for PostgreSQL database operations"
  docs_url    = "https://github.com/modelcontextprotocol/servers/tree/main/src/postgres"

  local_config {
    command      = "npx"
    arguments    = ["-y", "@modelcontextprotocol/server-postgres"]
    docker_image = "postgres:16-alpine"

    environment = {
      POSTGRES_USER     = "admin"
      POSTGRES_PASSWORD = "${var.postgres_password}"
      POSTGRES_DB       = "myapp"
    }
  }

  auth_fields = [
    {
      name        = "DATABASE_URL"
      label       = "PostgreSQL Connection String"
      type        = "text"
      required    = true
      description = "Connection string for PostgreSQL database"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the MCP server

### Optional

- `auth_description` (String) Description of the authentication requirements
- `auth_fields` (Attributes List) Custom authentication fields required by the MCP server (see [below for nested schema](#nestedatt--auth_fields))
- `description` (String) Description of the MCP server
- `docs_url` (String) URL to the MCP server documentation
- `installation_command` (String) Installation command for the MCP server (e.g., npm install -g @example/mcp-server)
- `local_config` (Attributes) Configuration for local MCP servers (stdio or SSE transport) (see [below for nested schema](#nestedatt--local_config))

### Read-Only

- `id` (String) MCP server catalog identifier

<a id="nestedatt--auth_fields"></a>
### Nested Schema for `auth_fields`

Required:

- `label` (String) Display label for the field
- `name` (String) Field name (used as environment variable)
- `required` (Boolean) Whether this field is required
- `type` (String) Field type: 'text', 'password', 'select', etc.

Optional:

- `description` (String) Description of the field


<a id="nestedatt--local_config"></a>
### Nested Schema for `local_config`

Required:

- `command` (String) Command to run the MCP server (e.g., 'node', 'python', 'npx')

Optional:

- `arguments` (List of String) Arguments to pass to the command
- `docker_image` (String) Docker image to use for running the MCP server
- `environment` (Map of String) Environment variables for the MCP server
- `http_path` (String) HTTP path for SSE transport (e.g., '/sse')
- `http_port` (Number) HTTP port for SSE transport
- `transport_type` (String) Transport type: 'stdio' or 'sse'. Defaults to 'stdio'
